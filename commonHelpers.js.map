{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = \"44822102-6d1d7649cda1a595bd957c97f\";\nconst BASE_URL = \"https://pixabay.com/api/\";\n\nexport async function fetchImages(query, page, perPage) {\n    // const URL = `https://pixabay.com/api/?key=${API_KEY}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true`;\n    // return fetch(URL).then(res => {\n        \n    //     console.log(res);\n\n    //     if (!res.ok) {\n    //         throw new Error(res.status)\n    //     }\n\n    //     return res.json();\n    // })\n    \n    const params = {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: 'true',\n        page: page,\n        per_page: perPage\n    }\n    \n    const response = await axios.get(BASE_URL, { params });\n    return response.data;\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nexport function showError(message) {\n    iziToast.error({\n        title: 'Error',\n        message: message,\n        position: 'topRight'\n    });\n}\n\nexport function showInfo(message) {\n    iziToast.info({\n        title: 'Info',\n        message: message,\n        position: 'topRight'\n    });\n}\n\nexport function renderGallery(images, clear = true) {\n    const gallery = document.querySelector('.gallery');\n    if (clear) {\n        gallery.innerHTML = '';\n    }\n\n    const galleryContent = images.map(image => `\n        <a href=\"${image.largeImageURL}\" class=\"gallery-item\">\n            <div class=\"image-card\">\n                <img src=\"${image.webformatURL}\" alt=\"${image.tags}\">\n                <div class=\"info\">\n                    <p>Likes ${image.likes}</p>\n                    <p>Views ${image.views}</p>\n                    <p>Comments ${image.comments}</p>\n                    <p>Downloads ${image.downloads}</p>\n                </div>\n            </div>\n        </a>\n    `).join('');\n\n    // gallery.innerHTML = galleryContent;\n    gallery.insertAdjacentHTML('beforeend', galleryContent);\n}","import axios from 'axios';\nimport { fetchImages } from './js/pixabay-api.js';\nimport { renderGallery, showError, showInfo } from './js/render-functions.js';\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n\nconst loadingIndicator = document.getElementById('loading');\nconst gallery = document.querySelector(\".gallery\");\nconst loadMoreButton = document.getElementById('load-more');\nconst searchForm = document.querySelector(\".search-form\");\n// const imageCard = document.querySelector(\".image-card\");\n\nlet queryValue = \"\";\nlet page = 1;\nconst perPage = 15;\n\n\nconst lightbox = new SimpleLightbox('.gallery a', { captionsData: 'alt', captionDelay: 250 });\n\n\n\nsearchForm.addEventListener(\"submit\", handlerSubmit);\nasync function handlerSubmit(event) {\n    event.preventDefault();\n\n    // const form = event.currentTarget;\n    // const queryValue = form.elements.query.value;\n    queryValue = event.currentTarget.elements.query.value.trim();\n    if (!queryValue) {\n        showError(\"Please enter something!\");\n        return;\n    }\n\n    gallery.innerHTML = '';\n    page = 1;\n    loadingIndicator.style.display = 'block';\n    loadMoreButton.style.display = 'none';\n\n    try {\n        const data = await fetchImages(queryValue, page, perPage);\n        if (data.hits.length === 0) {\n            showInfo('Sorry, there are no images matching your search query. Please try again!');\n        } else {\n            renderGallery(data.hits, true);\n            lightbox.refresh();\n            if (data.hits.length === perPage) {\n                loadMoreButton.style.display = 'block';\n            }\n        }\n    } catch (error) {\n        showError('An error occurred while fetching images. Please try again later.');\n    } finally {\n        loadingIndicator.style.display = 'none';\n        searchForm.reset();\n    }\n\n\n    // fetchImages(queryValue)\n    //     .then(data => {\n    //         if (data.hits.length === 0) {\n    //             showInfo('Sorry, there are no images matching your search query. Please try again!');\n    //         } else {\n    //             renderGallery(data.hits);\n    //             lightbox.refresh();\n    //         }\n    //     })\n    //     .catch(error => {\n    //         console.log(error);\n    //         showError('An error occurred while fetching images. Please try again later.')\n    //     })\n    //     .finally(() => {\n    //         loadingIndicator.style.display = 'none';\n    //         form.reset()\n    //     });\n} \n\nloadMoreButton.addEventListener(\"click\", handlerLoadMore);\nasync function handlerLoadMore() {\n    page += 1;\n    loadMoreButton.style.display = 'none';\n    loadingIndicator.style.display = 'block';\n\n    try {\n        const data = await fetchImages(queryValue, page, perPage);\n        renderGallery(data.hits, false);\n        lightbox.refresh();\n\n        const { height: cardHeight } = gallery.firstElementChild.getBoundingClientRect();\n        window.scrollBy({\n            top: cardHeight * 2,\n            behavior: 'smooth',\n        });\n\n        if (data.hits.length === perPage) {\n            loadMoreButton.style.display = 'block';\n        } else {\n        showInfo(\"We're sorry, but you've reached the end of search results.\");\n        loadMoreButton.removeEventListener(\"click\", handlerLoadMore);\n    }\n    } \n    catch (error) {\n        showError('An error occurred while fetching images. Please try again later.');\n    } finally {\n        loadingIndicator.style.display = 'none';\n    }\n}"],"names":["API_KEY","BASE_URL","fetchImages","query","page","perPage","params","axios","showError","message","iziToast","showInfo","renderGallery","images","clear","gallery","galleryContent","image","loadingIndicator","loadMoreButton","searchForm","queryValue","lightbox","SimpleLightbox","handlerSubmit","event","data","handlerLoadMore","cardHeight"],"mappings":"owBAEA,MAAMA,EAAU,qCACVC,EAAW,2BAEV,eAAeC,EAAYC,EAAOC,EAAMC,EAAS,CAapD,MAAMC,EAAS,CACX,IAAKN,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,KAAMC,EACN,SAAUC,CACb,EAGD,OADiB,MAAME,EAAM,IAAIN,EAAU,CAAE,OAAAK,CAAM,CAAE,GACrC,IACpB,CC3BO,SAASE,EAAUC,EAAS,CAC/BC,EAAS,MAAM,CACX,MAAO,QACP,QAASD,EACT,SAAU,UAClB,CAAK,CACL,CAEO,SAASE,EAASF,EAAS,CAC9BC,EAAS,KAAK,CACV,MAAO,OACP,QAASD,EACT,SAAU,UAClB,CAAK,CACL,CAEO,SAASG,EAAcC,EAAQC,EAAQ,GAAM,CAChD,MAAMC,EAAU,SAAS,cAAc,UAAU,EAC7CD,IACAC,EAAQ,UAAY,IAGxB,MAAMC,EAAiBH,EAAO,IAAII,GAAS;AAAA,mBAC5BA,EAAM,aAAa;AAAA;AAAA,4BAEVA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA,+BAEnCA,EAAM,KAAK;AAAA,+BACXA,EAAM,KAAK;AAAA,kCACRA,EAAM,QAAQ;AAAA,mCACbA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA,KAI7C,EAAE,KAAK,EAAE,EAGVF,EAAQ,mBAAmB,YAAaC,CAAc,CAC1D,CClCA,MAAME,EAAmB,SAAS,eAAe,SAAS,EACpDH,EAAU,SAAS,cAAc,UAAU,EAC3CI,EAAiB,SAAS,eAAe,WAAW,EACpDC,EAAa,SAAS,cAAc,cAAc,EAGxD,IAAIC,EAAa,GACbjB,EAAO,EACX,MAAMC,EAAU,GAGViB,EAAW,IAAIC,EAAe,aAAc,CAAE,aAAc,MAAO,aAAc,GAAG,CAAE,EAI5FH,EAAW,iBAAiB,SAAUI,CAAa,EACnD,eAAeA,EAAcC,EAAO,CAMhC,GALAA,EAAM,eAAc,EAIpBJ,EAAaI,EAAM,cAAc,SAAS,MAAM,MAAM,OAClD,CAACJ,EAAY,CACbb,EAAU,yBAAyB,EACnC,MACH,CAEDO,EAAQ,UAAY,GACpBX,EAAO,EACPc,EAAiB,MAAM,QAAU,QACjCC,EAAe,MAAM,QAAU,OAE/B,GAAI,CACA,MAAMO,EAAO,MAAMxB,EAAYmB,EAAYjB,EAAMC,CAAO,EACpDqB,EAAK,KAAK,SAAW,EACrBf,EAAS,0EAA0E,GAEnFC,EAAcc,EAAK,KAAM,EAAI,EAC7BJ,EAAS,QAAO,EACZI,EAAK,KAAK,SAAWrB,IACrBc,EAAe,MAAM,QAAU,SAG1C,MAAe,CACZX,EAAU,kEAAkE,CACpF,QAAc,CACNU,EAAiB,MAAM,QAAU,OACjCE,EAAW,MAAK,CACnB,CAoBL,CAEAD,EAAe,iBAAiB,QAASQ,CAAe,EACxD,eAAeA,GAAkB,CAC7BvB,GAAQ,EACRe,EAAe,MAAM,QAAU,OAC/BD,EAAiB,MAAM,QAAU,QAEjC,GAAI,CACA,MAAMQ,EAAO,MAAMxB,EAAYmB,EAAYjB,EAAMC,CAAO,EACxDO,EAAcc,EAAK,KAAM,EAAK,EAC9BJ,EAAS,QAAO,EAEhB,KAAM,CAAE,OAAQM,CAAU,EAAKb,EAAQ,kBAAkB,wBACzD,OAAO,SAAS,CACZ,IAAKa,EAAa,EAClB,SAAU,QACtB,CAAS,EAEGF,EAAK,KAAK,SAAWrB,EACrBc,EAAe,MAAM,QAAU,SAEnCR,EAAS,4DAA4D,EACrEQ,EAAe,oBAAoB,QAASQ,CAAe,EAE9D,MACa,CACVnB,EAAU,kEAAkE,CACpF,QAAc,CACNU,EAAiB,MAAM,QAAU,MACpC,CACL"}